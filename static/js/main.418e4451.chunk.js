(this["webpackJsonpgraphql-checklist"]=this["webpackJsonpgraphql-checklist"]||[]).push([[0],{60:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(58),c=n.n(o),i=n(23),u=n.n(i),s=n(39),l=n(29),d=n(28),p=n(21),f=n(22);function b(){var e=Object(d.a)(["mutation deleteTodo($id: uuid!) {\n  delete_todos(where: {id: {_eq: $id}}) {\n    returning {\n      done\n      id\n      text\n    }\n  }\n}"]);return b=function(){return e},e}function m(){var e=Object(d.a)(["mutation addTodo($text: String!) {\n  insert_todos(objects: {text: $text}) {\n    returning {\n      done\n      id\n      text\n    }\n  }\n}"]);return m=function(){return e},e}function h(){var e=Object(d.a)(["mutation toggleTodo($id: uuid!, $done: Boolean!) {\n  update_todos(where: {id: {_eq: $id}}, _set: {done: $done}) {\n    returning {\n      done\n      id\n      text\n    }\n  }\n}"]);return h=function(){return e},e}function v(){var e=Object(d.a)(["query getTodos {\n  todos {\n    done\n    id\n    text\n    }\n  }"]);return v=function(){return e},e}var g=Object(f.b)(v()),x=Object(f.b)(h()),j=Object(f.b)(m()),O=Object(f.b)(b());var y=function(){var e=a.a.useState(""),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(p.useQuery)(g),c=o.data,i=o.loading,d=o.error,f=Object(p.useMutation)(x),b=Object(l.a)(f,1)[0],m=Object(p.useMutation)(j,{onCompleted:function(){return r("")}}),h=Object(l.a)(m,1)[0],v=Object(p.useMutation)(O),y=Object(l.a)(v,1)[0];function E(){return(E=Object(s.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.done,e.next=3,b({variables:{id:n,done:!r}});case 3:a=e.sent,console.log("toggled data",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(s.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h({variables:{text:n},refetchQueries:[{query:g}]});case 5:r=e.sent,console.log("added todo",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!window.confirm("Do you want to delete this todo?")){e.next=7;break}return e.next=5,y({variables:{id:n},update:function(e){var t=e.readQuery({query:g}).todos.filter((function(e){return e.id!==n}));e.writeQuery({query:g,data:{todos:t}})}});case 5:r=e.sent,console.log(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i?a.a.createElement("div",null,"Loading..."):d?a.a.createElement("div",null,"Error in fetching todos (GET_TODOS)"):a.a.createElement("div",{className:"vh-100 code flex flex-column items-center bg-blue white pa3 fl-1"},a.a.createElement("h1",{className:"f2-l"},"GraphQL Checklist",a.a.createElement("span",{role:"img","aria-label":"Checkmark"},"\u2705")),a.a.createElement("form",{onSubmit:function(e){return k.apply(this,arguments)},className:"mb3"},a.a.createElement("input",{className:"pa2 f4 b--dashed",type:"text",placeholder:"Write your task here",onChange:function(e){return r(e.target.value)},value:n}),a.a.createElement("button",{className:"pa2 f4 bg-green",type:"submit"},"Create")),a.a.createElement("div",{className:"flex items-center justify-center flex-column"},c.todos.map((function(e){return a.a.createElement("p",{onDoubleClick:function(){return function(e){return E.apply(this,arguments)}(e)},key:e.id},a.a.createElement("span",{className:"pointer list pa1 f3 ".concat(e.done&&"strike")},e.text),a.a.createElement("button",{onClick:function(){return function(e){return w.apply(this,arguments)}(e)},className:"bg-transparent bn f4 "},a.a.createElement("span",{className:"red"},"\xd7")))}))))},E=new f.a({uri:"https://possible-oarfish-25.hasura.app/v1/graphql"});c.a.render(a.a.createElement(p.ApolloProvider,{client:E},a.a.createElement(y,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.418e4451.chunk.js.map